<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Pipes & Redirections</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><h2>Pipes</h2><br />• Use the output from one program as the input of the other program<br />• Syntax: prog1 | prog2<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">ps</span>&nbsp;aux&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">less</span></div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;List&nbsp;python&nbsp;script&nbsp;files&nbsp;in&nbsp;multiple&nbsp;directories</span><br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>bin&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>usr<span style="color:#ff9d00;font-weight:700">/</span>bin&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">sort</span>&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">uniq</span>&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">grep</span>&nbsp;-F&nbsp;<span style="color:#3ad900;font-weight:400">".py"</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;or</span><br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>bin&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>usr<span style="color:#ff9d00;font-weight:700">/</span>bin&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">sort</span>&nbsp;-u&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">grep</span>&nbsp;-F&nbsp;<span style="color:#3ad900;font-weight:400">".py"</span></div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Redirection</h2><br /><br /><img src="images\21-1.png" alt="images\21-1.png" /><br /><br />• Every process run by the Linux kernel has 3 channels<br />   ◇ The standard input (stdin) <br />      ▪ stdin is the keyboard by default. It has a file descriptor of 0<br />   ◇ The standard output (stdout)<br />      ▪ stdout is the shell by default. It has a file descriptor of 1<br />   ◇ The standard error (stderr)<br />      ▪ stderr output is the shell by default. It has a file descriptor of 2<br />• Redirection can be used with &amp;&amp; (see <a href="__Main__--Linux--Shell--Filtering_Commands.html">Filtering</a>)<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Output Redirection</h2><br />• To redirect the output Use &gt; (to overwrite) or use &gt;&gt; (to append)<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Redirect&nbsp;stdin&nbsp;to&nbsp;a&nbsp;file</span><br /><span style="color:#ff9d00;font-weight:700">echo</span>&nbsp;<span style="color:#3ad900;font-weight:400">"This&nbsp;is&nbsp;line&nbsp;1"</span>&nbsp;1&gt;&nbsp;somefile<br /><span style="color:#0088ff;font-weight:400">#&nbsp;or</span><br /><span style="color:#ff9d00;font-weight:700">echo</span>&nbsp;<span style="color:#3ad900;font-weight:400">"This&nbsp;is&nbsp;line&nbsp;1"</span>&nbsp;&gt;&nbsp;somefile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;overwrite</span><br /><span style="color:#ff9d00;font-weight:700">echo</span>&nbsp;<span style="color:#3ad900;font-weight:400">"This&nbsp;is&nbsp;line&nbsp;2"</span>&nbsp;&gt;&gt;&nbsp;somefile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;append</span></div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Redirect&nbsp;stderr&nbsp;to&nbsp;a&nbsp;file</span><br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;-l&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dir_not_exist&nbsp;&gt;&nbsp;bin.out<br /><span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;bin.out&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;nothing&nbsp;in&nbsp;file&nbsp;bin.out</span><br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;-l&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dir_not_exist&nbsp;2&gt;&nbsp;bin.out</div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Redirect&nbsp;both&nbsp;stdin&nbsp;and&nbsp;stderr&nbsp;to&nbsp;a&nbsp;file</span><br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;-l&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>home&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dir_not_exist&nbsp;<span style="color:#ff9d00;font-weight:700">&amp;</span>&gt;&nbsp;err.out</div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Redirect&nbsp;stdin&nbsp;to&nbsp;/dev/null&nbsp;(discard)</span><br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;-l&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>usr<span style="color:#ff9d00;font-weight:700">/</span>bin&nbsp;<span style="color:#ff9d00;font-weight:700">&amp;</span>&gt;&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>null<br /><span style="color:#0088ff;font-weight:400">#&nbsp;Useful&nbsp;when&nbsp;you&nbsp;run&nbsp;some&nbsp;lengthy&nbsp;job&nbsp;on&nbsp;a&nbsp;server&nbsp;and&nbsp;the&nbsp;output&nbsp;is&nbsp;not&nbsp;needed&nbsp;or&nbsp;you&nbsp;do&nbsp;some&nbsp;programming&nbsp;and&nbsp;you&nbsp;want&nbsp;to&nbsp;discard&nbsp;the&nbsp;output</span></div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Concatenate&nbsp;files</span><br /><span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;file1.txt&nbsp;file2.txt&nbsp;&gt;&nbsp;combine.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;cat&nbsp;-&nbsp;handle&nbsp;input</span></div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Input Redirection</h2><br />• To redirect input , use &lt;<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Send&nbsp;an&nbsp;email&nbsp;with&nbsp;a&nbsp;log&nbsp;file&nbsp;to&nbsp;the&nbsp;administrator</span><br />mail&nbsp;-s&nbsp;<span style="color:#3ad900;font-weight:400">"This&nbsp;is&nbsp;the&nbsp;subject"</span>&nbsp;to_username&nbsp;&lt;&nbsp;message_log.txt</div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">wc</span>&nbsp;-l&nbsp;&lt;&nbsp;testfile<br /><span style="color:#0088ff;font-weight:400">#&nbsp;or</span><br /><span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;testfile&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">wc</span>&nbsp;-l</div></div><br /><br />• Without  tee, if  you want to capture an  output to a file and  stdout,  you need to open two shells <br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Shell&nbsp;#1</span><br /><span style="color:#ff9d00;font-weight:700">touch</span>&nbsp;mylog.log<br /><span style="color:#ff9d00;font-weight:700">echo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">date</span>&nbsp;&gt;&gt;&nbsp;mylog.log<br /><span style="color:#ff9d00;font-weight:700">date</span><br /><span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;mylog.log<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Shell&nbsp;#2</span><br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;-f&nbsp;mylog.log</div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>tee</h2><br />• With tee, you can redirect the  output to 2 places: stdout and a file<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Use&nbsp;tee&nbsp;to&nbsp;save&nbsp;intermediate&nbsp;results&nbsp;to&nbsp;a&nbsp;file</span><br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>bin&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>usr<span style="color:#ff9d00;font-weight:700">/</span>bin&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">sort</span>&nbsp;-u&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">tee</span>&nbsp;sorted.txt&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">grep</span>&nbsp;-F&nbsp;<span style="color:#3ad900;font-weight:400">".py"</span></div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Watch&nbsp;&amp;&nbsp;Log&nbsp;Command&nbsp;Output</span><br /><span style="color:#ff9d00;font-weight:700">date</span>&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">tee</span>&nbsp;mylog.log<br /><span style="color:#ff9d00;font-weight:700">date</span>&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">tee</span>&nbsp;-a&nbsp;mylog.log&nbsp;<span style="color:#ff9d00;font-weight:700">(</span>append<span style="color:#ff9d00;font-weight:700">)</span>&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;alternate</span><br /><span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;mylog.log</div></div><br /><p align="center"><img src="images\home.png" height="22" width="22">  <a href="index.html">Index</a></p></body></html>