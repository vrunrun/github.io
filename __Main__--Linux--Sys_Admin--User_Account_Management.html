<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>User Account Management</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><h2>/etc/passwd</h2><br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;-i<br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/passwd</span></div></div><br /><br /><code>lightdm:x:111:114:Light Display Manager:/var/lib/lightdm:/bin/false<br />pulse:x:112:115:PulseAudio daemon,,,:/var/run/pulse:/bin/false<br />avahi:x:113:118:Avahi mDNS daemon,,,:/var/run/avahi-daemon:/bin/false<br />colord:x:114:119:colord colour management daemon,,,:/var/lib/colord:/bin/false<br />saned:x:115:120::/var/lib/saned:/bin/false<br />hplip:x:116:7:HPLIP system user,,,:/var/run/hplip:/bin/false<br />kl:x:1000:1000:kl,,,:/home/kl:/bin/bash<br />geoclue:x:117:121::/var/lib/geoclue:/bin/false<br />libvirt-qemu:x:64055:123:Libvirt Qemu,,,:/var/lib/libvirt:/bin/false<br />Debian-exim:x:118:122::/var/spool/exim4:/bin/false</code><br /><br />Fields<br />1. username<br />2. password, move to /etc/shadow<br />3. user ID<br />4. group ID<br />5. user info (email, phone etc.)<br />6. home directory<br />7. default shell<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Show&nbsp;number&nbsp;of&nbsp;users&nbsp;(service&nbsp;+&nbsp;created)</span><br /><span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/passwd</span>&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">wc</span>&nbsp;-l</div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>/etc/shadow</h2><br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>shadow</div></div><br /><br /><code>lightdm:*:18001:0:99999:7:::<br />pulse:*:18001:0:99999:7:::<br />avahi:*:18001:0:99999:7:::<br />colord:*:18001:0:99999:7:::<br />saned:*:18001:0:99999:7:::<br />hplip:*:18001:0:99999:7:::<br />kl:$6$HQljOPVP$xQNAU0XfiCBZX5VMlW81ekMSteyn12.JRJA8t92HDryUWHY/8SM7VxtjvepbJsb9ByEhT8i0Fk3r2whpvNGBj0:18001:0:99999:7:::<br />geoclue:*:18001:0:99999:7:::<br />libvirt-qemu:!:18001:0:99999:7:::<br />Debian-exim:!:18005:0:99999:7:::</code><br /><br />Fields<br />1. username<br />2. password (hashed)<br />   ◇ * means user can't login<br />   ◇ ! means login is disabled<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>/etc/group</h2><br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>group</div></div><br /><br /><code>colord:x:119:<br />saned:x:120:<br />kl:x:1000:<br />geoclue:x:121:<br />kvm:x:123:kl<br />libvirt:x:124:kl<br />libvirt-qemu:x:64055:libvirt-qemu<br />ubridge:x:125:kl<br />vboxusers:x:126:<br />Debian-exim:x:122:</code><br /><br />1. group name<br />2. ?<br />3. group id<br />4. group members<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>/etc/skel</h2><br />• Stuff to put in a new user's home directory e.g. examples.desktop<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>skel</div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Management Commands</h2><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;add&nbsp;user</span><br />useradd&nbsp;-m&nbsp;-d&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>testuser&nbsp;-s&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>bin<span style="color:#ff9d00;font-weight:700">/bash</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;-m&nbsp;create&nbsp;directory</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;-d&nbsp;define&nbsp;directory</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;-s&nbsp;specify&nbsp;shell&nbsp;to&nbsp;use&nbsp;(optional)</span><br /><br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/passwd</span><br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>shadow<br /><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>home&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;check&nbsp;if&nbsp;home&nbsp;dir&nbsp;was&nbsp;created</span><br /><span style="color:#ff9d00;font-weight:700">grep</span>&nbsp;testuser&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>group</div></div><br /><br /><code>testuser:!:18007:0:99999:7:::</code> ← Can't login yet. Need to set passwd<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;set&nbsp;password</span><br /><span style="color:#ff9d00;font-weight:700">passwd</span>&nbsp;testuser<br /><br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>shadow</div></div><br /><br /><code>test:$6$jNbx6Ele$VVzwRlyqDZv3rEsey06w5T8tsHcNLpJxAYTpr45nxJjxQvwVJV0rZLczYuG0Mj9NQ55dtC7PeGLhMdLdxW16r/:18007:0:99999:7:::</code><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;lock&nbsp;user</span><br />usermod&nbsp;-L&nbsp;testuser<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;unlock&nbsp;user</span><br />usermod&nbsp;-U&nbsp;testuser<br /><br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>shadow</div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;delete&nbsp;user</span><br />userdel&nbsp;testuser<br /><br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>shadow<br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>group<br /><span style="color:#ff9d00;font-weight:700">tail</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/passwd</span></div></div><br /><br />• The /home/test user directory still exists after user removal<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">ls</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>home&nbsp;<span style="color:#ff9d00;font-weight:700">|</span>&nbsp;<span style="color:#ff9d00;font-weight:700">grep</span>&nbsp;<span style="color:#ff9d00;font-weight:700">test</span></div></div><br /><br /><code>drwxr-xr-x  2 1001 1001 4096 Apr 21 12:51 test</code> ← username lookup failed, show 1001<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;remove&nbsp;deleted&nbsp;user&nbsp;home&nbsp;directory</span><br /><span style="color:#ff9d00;font-weight:700">rm</span>&nbsp;-rf&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>home<span style="color:#ff9d00;font-weight:700">/</span>test<span style="color:#ff9d00;font-weight:700">/</span></div></div><br /><br />• Use “/usr/sbin/newusers” to create new users in batch<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">man</span>&nbsp;newusers</div></div><br /><br /><br /><p align="center"><img src="images\home.png" height="22" width="22">  <a href="index.html">Index</a></p></body></html>