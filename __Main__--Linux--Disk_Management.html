<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Disk Management</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body><br /><h1>Disk Management</h1><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;blkid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;get&nbsp;label,&nbsp;UUID&nbsp;and&nbsp;type</span></div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Make a Bootable USB Drive</h2><br />• All data will be wiped<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Write&nbsp;ISO&nbsp;to&nbsp;your&nbsp;USB&nbsp;flash&nbsp;drive</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">dd</span>&nbsp;bs=4M&nbsp;if=<span style="color:#ff9d00;font-weight:700">/</span>path<span style="color:#ff9d00;font-weight:700">/</span>to<span style="color:#ff9d00;font-weight:700">/</span>iso&nbsp;of=<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdX&nbsp;status=progress&nbsp;<span style="color:#ff9d00;font-weight:700">&amp;&amp;</span>&nbsp;<span style="color:#ff9d00;font-weight:700">sync</span><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;bs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;block&nbsp;size</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;if&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specify&nbsp;the&nbsp;source</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specify&nbsp;the&nbsp;destination</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;status=progress&nbsp;&nbsp;&nbsp;(optional)&nbsp;show&nbsp;progress</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;sync&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear&nbsp;the&nbsp;cache</span></div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Format a bootable flash drive to normal</h2><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;List&nbsp;device&nbsp;names</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;fdisk&nbsp;-l<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Clean&nbsp;flash&nbsp;drive</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;wipefs&nbsp;--all&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Create&nbsp;a&nbsp;new&nbsp;partition</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;cfdisk&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;select&nbsp;dos&nbsp;type&nbsp;&gt;&nbsp;New&nbsp;&gt;&nbsp;Write&nbsp;&gt;&nbsp;Quit</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Type&nbsp;83&nbsp;-&nbsp;Linux;&nbsp;other:&nbsp;c&nbsp;-&nbsp;W95&nbsp;FAT32&nbsp;(LBA)</span><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Create&nbsp;file&nbsp;system</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;mkfs.vfat&nbsp;-n&nbsp;<span style="color:#3ad900;font-weight:400">'label'</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb1&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;format&nbsp;partition&nbsp;1&nbsp;as&nbsp;FAT&nbsp;sys</span><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;If&nbsp;the&nbsp;above&nbsp;fails,&nbsp;overwrite&nbsp;drive&nbsp;with&nbsp;0s.&nbsp;Then&nbsp;use&nbsp;cfdisk&nbsp;utility&nbsp;(see&nbsp;above)</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">umount</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb<br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">dd</span>&nbsp;if=<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>zero&nbsp;of=<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;takes&nbsp;a&nbsp;long&nbsp;time</span><br /></div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Swap</h2><br />• <em>Swap partition</em> is more reliable than swap file but the size can't be changed<br />• <em>Swap file</em> is for home use and the size can be changed easily at any time<br />• Rule of thumb: swap size<br /><br /><table class="table"><col/><col/><tr><th>RAM</th><th>Swap</th></tr><tr><td>&lt; 1G</td><td>2G</td></tr><tr><td>2-4G</td><td>2-4G</td></tr><tr><td>8G</td><td>4G</td></tr><tr><td>&gt; 8G</td><td>2-4G</td></tr></table><br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Check&nbsp;swap&nbsp;size</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;swapon<br /><span style="color:#ff9d00;font-weight:700">free</span>&nbsp;-h</div></div><br /><br />• Create/ Resize swap file<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;fallocate&nbsp;-l&nbsp;1G&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>swapfile<br /><span style="color:#0088ff;font-weight:400">#&nbsp;-l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specify&nbsp;size&nbsp;of&nbsp;swap&nbsp;file</span><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;For&nbsp;F2FS&nbsp;or&nbsp;XFS,&nbsp;use&nbsp;dd&nbsp;command</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">dd</span>&nbsp;if=<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>zero&nbsp;of=<span style="color:#ff9d00;font-weight:700">/</span>swapfile&nbsp;bs=1M&nbsp;count=1024</div></div><br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">chmod</span>&nbsp;600&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>swapfile<br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;mkswap&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>swapfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;format</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;swapon&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>swapfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;activate&nbsp;the&nbsp;swap</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;swapon&nbsp;--show&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;verify</span></div></div><br /><br />   ◇ To make the change permanent, add the following to /etc/fstab<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">/</span>swapfile&nbsp;none&nbsp;swap&nbsp;defaults&nbsp;0&nbsp;0</div></div><br /><br />• Remove swap file<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;swapoff&nbsp;-a&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>swapfile&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;de-activate</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">rm</span>&nbsp;-f&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>swapfile<br /><span style="color:#0088ff;font-weight:400">#&nbsp;Also&nbsp;remove&nbsp;the&nbsp;entry&nbsp;from&nbsp;/etc/fstab</span></div></div><br /><br />• Swapiness<br />   ◇ Swapiness defines how often the kernel use RAM instead of swap (default = 60)<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Check&nbsp;swapiness</span><br /><span style="color:#ff9d00;font-weight:700">cat</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>proc<span style="color:#ff9d00;font-weight:700">/</span>sys<span style="color:#ff9d00;font-weight:700">/</span>vm<span style="color:#ff9d00;font-weight:700">/</span>swapiness<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Change&nbsp;swapiness</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;nano&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>sysctl.conf<br /><br />vm.swappiness=10&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;add&nbsp;this&nbsp;line&nbsp;to&nbsp;sysctl.conf</span></div></div><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><h2>Encrypt Storage Devices</h2><br /><br />• Backup data in target device first. This will overwrite and erase all data<br /><br /><div class="codebox"><div class="codebox"><span style="color:#0088ff;font-weight:400">#&nbsp;Install&nbsp;cryptsetup</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;apt&nbsp;<span style="color:#ff9d00;font-weight:700">install</span>&nbsp;cryptsetup<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;List&nbsp;block&nbsp;devices&nbsp;(partition&nbsp;info)</span><br />lsblk<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Encrypt&nbsp;the&nbsp;drive</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;cryptsetup&nbsp;--verbose&nbsp;--verify-passphrase&nbsp;luksFormat&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb1<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Open&nbsp;encrypted&nbsp;drive</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;cryptsetup&nbsp;luksOpen&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb1&nbsp;sdb1<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Once&nbsp;the&nbsp;encrypted&nbsp;drive&nbsp;is&nbsp;opened,&nbsp;it's&nbsp;mapped&nbsp;to&nbsp;/dev/mapper/sdb1</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;fdisk&nbsp;-l<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Create&nbsp;file&nbsp;system&nbsp;on&nbsp;it</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;mkfs.ext4&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>mapper<span style="color:#ff9d00;font-weight:700">/</span>sdb1<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;If&nbsp;you&nbsp;don't&nbsp;run&nbsp;your&nbsp;system&nbsp;in&nbsp;the&nbsp;parition,&nbsp;you&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;space&nbsp;reserved&nbsp;by&nbsp;ext4</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;tune2fs&nbsp;-m&nbsp;0&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>mapper<span style="color:#ff9d00;font-weight:700">/</span>sdb1</div></div><br /><br />• To use the encrypted volume<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">mkdir</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>mnt<span style="color:#ff9d00;font-weight:700">/</span>encrypted<br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">mount</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>mapper<span style="color:#ff9d00;font-weight:700">/</span>sdb1&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>mnt<span style="color:#ff9d00;font-weight:700">/</span>encrypted</div></div><br /><br />• By default, root is required to access encrypted parition but you can change it with <em>chown</em> command<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">chown</span>&nbsp;-R&nbsp;<span style="color:#333333;font-weight:400">`whoami`</span><span style="color:#ff9d00;font-weight:700">:</span>users&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>mnt<span style="color:#ff9d00;font-weight:700">/</span>encrypted</div></div><br /><br />• When you're done with the encrypted volume, unmount it and close the mapped device<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">umount</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>mapper<span style="color:#ff9d00;font-weight:700">/</span>sdb1<br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;cryptsetup&nbsp;luksClose&nbsp;sdb1</div></div><br /><br />• To use the encrypted volume next time<br /><br /><div class="codebox"><div class="codebox">lsblk<br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;cryptsetup&nbsp;luksOpen&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb1&nbsp;sdb1<br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">mount</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>mapper<span style="color:#ff9d00;font-weight:700">/</span>sdb1&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>mnt<span style="color:#ff9d00;font-weight:700">/</span>encrypted</div></div><br /><br />• Auto mounted encrypted partitions at boot. Applicable only on LUKS encryption<br /><br /><div class="codebox"><div class="codebox">lsblk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;Get&nbsp;name&nbsp;of&nbsp;encrypted&nbsp;device</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;cryptsetup&nbsp;luksUUID&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>sdb1&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;Get&nbsp;uuid&nbsp;of&nbsp;encrypted&nbsp;device</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;nano&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>crypttab<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Add&nbsp;the&nbsp;following&nbsp;line&nbsp;to&nbsp;/etc/crypttab</span><br />sdb1&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>disk<span style="color:#ff9d00;font-weight:700">/</span>by-uuid<span style="color:#ff9d00;font-weight:700">/</span>fd3c01ad-0e59-4bc1-9bda-7c61e00b36cf&nbsp;none&nbsp;luks<br /><span style="color:#0088ff;font-weight:400">#&nbsp;none&nbsp;-&nbsp;no&nbsp;key&nbsp;files&nbsp;used</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;You&nbsp;can&nbsp;use&nbsp;key&nbsp;files&nbsp;if&nbsp;your&nbsp;system&nbsp;partition&nbsp;is&nbsp;encrypted&nbsp;</span><br /><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;<span style="color:#ff9d00;font-weight:700">mkdir</span>&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>mnt<span style="color:#ff9d00;font-weight:700">/</span>encrypted_sdb1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;Define&nbsp;mount&nbsp;point</span><br /><span style="color:#ff9d00;font-weight:700">sudo</span>&nbsp;nano&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>fstab<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Add&nbsp;the&nbsp;following&nbsp;line&nbsp;to&nbsp;/etc/fstab</span><br /><span style="color:#ff9d00;font-weight:700">/</span>dev<span style="color:#ff9d00;font-weight:700">/</span>mapper<span style="color:#ff9d00;font-weight:700">/</span>sdb1&nbsp;<span style="color:#ff9d00;font-weight:700">/</span>mnt<span style="color:#ff9d00;font-weight:700">/</span>encrypted_sdb1&nbsp;ext4&nbsp;defaults&nbsp;0&nbsp;2</div></div><br /><p align="center"><img src="images\home.png" height="22" width="22">  <a href="index.html">Index</a></p></body></html>